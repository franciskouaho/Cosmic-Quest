# Welcome to your Expo app üëã

This is an [Expo](https://expo.dev) project created with [`create-expo-app`](https://www.npmjs.com/package/create-expo-app).

## Get started

1. Install dependencies

   ```bash
   npm install
   ```

2. Start the app

   ```bash
    npx expo start
   ```

In the output, you'll find options to open the app in a

- [development build](https://docs.expo.dev/develop/development-builds/introduction/)
- [Android emulator](https://docs.expo.dev/workflow/android-studio-emulator/)
- [iOS simulator](https://docs.expo.dev/workflow/ios-simulator/)
- [Expo Go](https://expo.dev/go), a limited sandbox for trying out app development with Expo

You can start developing by editing the files inside the **app** directory. This project uses [file-based routing](https://docs.expo.dev/router/introduction).

## Cosmic Quest: D√©roulement du jeu

Le jeu Cosmic Quest se d√©roule en plusieurs phases:

1. **Phase QUESTION**: Les joueurs voient la question, et la personne concern√©e (targetPlayer) est inform√©e.
2. **Phase ANSWER**: Tous les joueurs sauf la cible soumettent leurs r√©ponses.
3. **Phase VOTE**: La cible vote pour sa r√©ponse pr√©f√©r√©e (tous les autres en attente).
4. **Phase RESULTS**: Affichage des r√©sultats et des scores.

Si un joueur reste bloqu√© en attente alors que tous les joueurs ont r√©pondu, cela peut indiquer:

- Un probl√®me de synchronisation entre le client et le serveur
- Des conditions de transition de phase non remplies
- Un probl√®me de socket pour les mises √† jour en temps r√©el

### D√©pannage

Si tous les joueurs sont bloqu√©s en "attente":

- V√©rifiez si tous les joueurs √©ligibles ont bien r√©pondu
- Essayez d'actualiser manuellement l'√©tat du jeu
- Pour les d√©veloppeurs: v√©rifiez les logs c√¥t√© serveur pour identifier les blocages potentiels

### R√©cup√©ration automatique

Le syst√®me dispose maintenant d'un m√©canisme de r√©cup√©ration automatique qui:

- D√©tecte les erreurs 500 persistantes
- Tente de r√©cup√©rer l'√©tat via WebSocket
- Fournit un √©tat minimal en dernier recours pour √©viter les crashs d'application

En cas d'erreur persistante, utilisez la fonction `GameStateRecovery.recoverFromPersistentError(gameId)`
dans vos outils de d√©veloppement.

## Communication Socket.IO dans Cosmic Quest

Le jeu utilise Socket.IO pour les communications en temps r√©el. Voici les √©v√©nements cl√©s:

### √âv√©nements envoy√©s au serveur:

- `game:submit_answer` - Soumettre une r√©ponse √† une question
- `game:submit_vote` - Voter pour une r√©ponse
- `game:force_check` - Forcer une v√©rification de l'√©tat du jeu
- `game:next_round` - Passer au tour suivant
- `join-game` - Rejoindre un canal de jeu
- `join-room` - Rejoindre un canal de salle

### √âv√©nements re√ßus du serveur:

- `game:update` - Mises √† jour sur l'√©tat du jeu (changement de phase, nouvelles r√©ponses, etc.)
- `room:update` - Mises √† jour sur l'√©tat de la salle (joueurs qui rejoignent/quittent, etc.)

### D√©pannage Socket.IO

Si les communications temps r√©el ne fonctionnent pas:

1. V√©rifier la connexion internet
2. Essayer de rafra√Æchir manuellement l'√©tat du jeu
3. V√©rifier dans les logs si les √©v√©nements sont correctement envoy√©s/re√ßus
4. Utiliser l'utilitaire `socketTester.diagnosticSocket()` pour v√©rifier l'√©tat de la connexion

## Get a fresh project

When you're ready, run:

```bash
npm run reset-project
```

This command will move the starter code to the **app-example** directory and create a blank **app** directory where you can start developing.

## Learn more

To learn more about developing your project with Expo, look at the following resources:

- [Expo documentation](https://docs.expo.dev/): Learn fundamentals, or go into advanced topics with our [guides](https://docs.expo.dev/guides).
- [Learn Expo tutorial](https://docs.expo.dev/tutorial/introduction/): Follow a step-by-step tutorial where you'll create a project that runs on Android, iOS, and the web.

## Join the community

Join our community of developers creating universal apps.

- [Expo on GitHub](https://github.com/expo/expo): View our open source platform and contribute.
- [Discord community](https://chat.expo.dev): Chat with Expo users and ask questions.
